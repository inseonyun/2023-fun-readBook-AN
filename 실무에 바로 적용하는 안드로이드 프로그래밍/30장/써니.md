# 커스텀 뷰와 터치 이벤트

## 커스텀 뷰 생성하기
+ 단순(simple) 유형
    > 단순 뷰는 내부적으로 복잡할 수 있지만 자식 뷰가 없어서 구조가 간단하다. 대부분 커스텀 랜더링을 수행한다.
+ 복합(composite) 유형
    > 복합 뷰는 서로 다른 뷰 객체들로 구성된다. 일반적으로 복합 뷰는 자식 뷰들을 관리하지만, 자신은 커스텀 랜더링을 하지 않는다. 대신에 랜더링은 각 자식 뷰에게 위임한다.

### 커스텀 뷰 생성 단계
1. 슈퍼클래스 선택
    > 단순 커스텀 뷰는 비어있는 캔버스와 같아서 가정 많이 사용된다.
    > 복합 커스텀 뷰에서는 FrameLayout과 같이 적합한 레이아웃 클래스를 선택한다.
2. 1번에서 선택한 슈퍼 클래스의 서브 클래스를 만들고, 해당 슈퍼 클래스의 생성자를 오버라이드 한다.
3. 슈퍼 클래스의 주요 함수들을 오버라이드해 커스터마이징한다.


## 터치 이벤트 처리하기
터치 이벤트를 리스닝할 때는 다음의 setOnTouchListener를 사용해서 터치 이벤트 리스너를 설정한다.
해당 함수는 View.OnTouchListener를 구현한 리스너 객체를 전달하면 터치 이벤트가 발생할 때마다 구현된 onTouchEvent 함수가 호출된다.

onTouchEvent 함수는 MotionEvent를 인자로 받는다.
```kotlin
override fun onTouchEvent(event: MotionEvent): Boolean
```

| 액션 상수 | 의미 |
|:---:|:---:|
| ACTION_DOWN | 사용자가 화면을 손가락으로 터치함 |
| ACTION_MOVE | 사용자가 화면 위에서 손가락을 움직임 |
| ACTION_UP | 사용자가 화면에서 손가락을 뗌 |
| ACTION_CANCEL | 부모 뷰가 터치 이벤트를 가로챔 |

onTouchEvent의 구현 코드에서는 MotionEvent 객체의 다음 함수를 호출해 액션의 값을 확인할 수 있다.
```kotlin
final fun getAction(): Int
```

**invalidate()함수**
+ invalidate() 함수를 호출하면 뷰가 무효라는 것을 안드로이드에게 알려주므로 안드로이드 시스템이 해당 뷰의 변경사항을 반영해서 다시 그려준다.


