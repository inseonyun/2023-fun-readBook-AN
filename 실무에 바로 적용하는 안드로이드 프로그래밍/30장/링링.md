# 커스텀 뷰와 터치 이벤트

## 커스텀 뷰 생성하기

커스텀 뷰는 크게 두 가지 유형으로 분류할 수 있다.

### 유형

**단순**

단순 뷰는 내부적으로 복잡할 수 있지만, 자식 뷰가 없어서 구조가 간단하다. 대부분 커스텀 렌더링을 수행한다. 

**복합**

복합 뷰는 서로 다른 뷰 객체들로 구성된다. 일반적으로 복합 뷰는 자식 뷰들을 관리하지만, 자신은 커스텀 렌더링을 하지 않는다. 대신에 렌더링은 각 자식 뷰에게 위임한다. 

### 단계

1. 슈퍼 클래스를 선택한다. 

단순 커스텀 뷰에서 View는 비어 있는 캔버스와 같아서 사장 많이 사용된다. 복합 커스텀 뷰에서는 FrameLayout과 같이 적합한 레이아웃 클래스를 선택한다. 

1. 1번에서 선택한 슈퍼 클래스의 서브 클래스를 만들고, 해당 슈퍼 클래스의 생성자를 오버라이드 한다. 
2. 슈퍼 클래스의 주요 함수들을 오버라이드해 커스터마이징 한다. 

참고로 앱이 시작되면 앱의 모든 뷰가 무효 상태가 되어 뷰들이 화면에 어떤 것도 그릴 수 없게 된다. 이런 상황을 해결하기 위해 안드로이드는 최상위 수준 View의 draw() 함수를 호출함으로써 부모 뷰가 자신을 그리게 되고, 이것의 자식뷰들 또한 자신들을 그리게 된다. 뷰 계층을 따라 내려가면서 자식 뷰들도 자신들을 그리게 되는 식이다. 결국 뷰 계층의 모든 뷰가 자신을 그리게 되면 최상위 수준 View는 더 이상 무효 상태가 되지 않는다. 

## onDraw(Canvas) 내부에서 렌더링 하기

뷰가 화면에 그려지게 하려면 다음 View 함수를 오버라이드 해야한다. 

```kotlin
protected fun onDraw(canvas: Canvas)
```

## GestureDetector

터치 이벤트를 처리하는 또 다른 방법으로 GestureDetector 객체가 있다. 이 객체는 특정 이벤트가 발생하면 알려주는 리스널ㄹ 갖고 있다. 화면을 길게 누르거나 밀거나 스크롤하는 등의 이벤트를 리스닝을 함수들을 갖고 있다.
