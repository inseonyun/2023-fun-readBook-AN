# 커스텀 뷰와 터치 이벤트

## 커스텀 뷰

#### 종류

- 단순(simple): 단순 뷰는 내부적으로는 복잡하나, 자식 뷰가 없어서 구조가 간단하다. 커스텀 렌더잉르 수행한다.

- 복합(composite): 서로 다른 뷰 객체들로 구성된다. 자식 뷰들을 관리하지만, 자신은 커스텀 렌더링을 하지 않고 자식 뷰에게 위임한다.

#### 커스텀 뷰 생성

- 슈퍼 클래스를 선택한다. (View: 비어 있는 캔버스와 같아 가장 많이 사용된다) 

- 1번에서 선택한 슈퍼 클래스의 서브 클래스를 만들고, 슈퍼 클래스의 생성자를 오버라이드한다.

- 슈퍼 클래스의 주요 함수들을 오버라이드해 커스터마이징한다.

#### 생성자

```kotlin
class BoxDrawingView(context: Context, attrs: AttributeSet? = null): View(context, attrs) {

}
```

- 뷰의 인스턴스가 코드 또는 레이아웃 XML로부터 생성될 수 있어야 한다 
	+ -> 레이아웃 파일로부터 인스턴스가 생성되어 초기화되는 뷰는 XML에 지정된 속성들을 포함하는 AttributeSet의 인스턴스를 인자로 받는다.
	
- XML에서는 레이아웃 인플레이터가 찾을 수 있도록 `BoxDrawingView`가 속한 패키지의 전체 경로를 지정해야 한다. 
	+ 인플레이터는 View 인스턴스를 생성하는 데 필요한 레이아웃 파일을 찾는다.
	
	- 이 때, 전체 패키지 경로를 지정하지 않으면 인플레이터가 android.view와 android.widget 패키지에서 해당 이름의 클래스를 찾는다.
	
	-  즉, 전체 경로를 지정하지 않으면 레이아웃 인플레이터는 클래스를 찾지 못해 앱 실행이 중단된다.
	
## 터치 이벤트 처리

- `setOnTouchListener`를 이용하여 터치 이벤트 리스너를 설정한다.
	+ setOnClickListener와 동일한 방법으로 작동한다.	

- `onTouchEvent()`는 MotionEvent 인스턴스를 인자로 받는다.
	+ `getAction()`을 통해 액션 값을 확인할 수 있다.

## onDraw(Canvas) 내부에서 렌더링하기

- 뷰가 화면에 그려지게 하기 위해 `onDraw(canvas: Canvas)`를 오버라이드 한다.

- `invalidate()` 함수는 boxDrawingView를 다시 무효 상태로 만들어 자기 자신을 그리는데, 이 때 onDraw가 호출된다.

- Canvas 클래스는 모든 그리기 함수를 갖고 있고, 그리는 위치와 선, 원, 단어, 사각형 등의 형태를 결정한다.

- Paint 클래스는 이 함수들이 어떻게 수행되는지를 결정한다. 즉, 어떤 도형이 채워져야 하는지, 어떤 폰트인지, 어떤 색인지 등을 지정한다.


