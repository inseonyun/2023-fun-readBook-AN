6장) 객체 지도

사람들의 요구사항은 계속 변하므로 모델이 제공해야 하는 기능 역시 이에 따라 지속적으로 변할 수 밖에 없다.
기능을 중심으로 구조를 종속시키는 접근법은 범용적이지 않고 재사용이 불가능하며 변경에 취약한 모델을 낳는다
반면, 안정적인 구조(지도)를 중심으로 기능을 종속시키는 접근법은 범용적이고 재사용 가능하며 변경에 유연하게 대처할 수 있는 모델을 만든다.
> 자주 변경되는 기능이 아니라 안정적인 구조를 따라 역할, 책임, 협력을 구헝하라. 

### 기능 설계 vs 구조 설게
1. 기능 측면의 설계는 제품이 사용자를 위해 무엇을 할 수 있는지에 초점을 맞춘다.
2. 구조 측면의 설계는 제품의 형태가 어떠해야 하는지에 초점을 맞춘다.

> 좋은 소프트웨어는 사용자가 원하는 기능을 제공하는 동시에 새로운 기능을 빠르고 안정적으로 추가할 수 있어야 한다.

그렇다고 해서 너무 앞서서 먼 미래를 바라보고 설계하지 말자. 불필요한 복잡한 설계를 낳을 수 있다.
변경을 예측 하지말고, 변경을 수용 가능하도록 선택의 여지를 설계에 마련해놔라. 
> 추상화로 전략 패턴을 사용하라는 말 같다.

즉, 기능보다는 구조를 중심적으로 생각해라. 

### 기능과 구조
1. 구조는 사용자나 이해관계자들이 도메인에 관해 생각하는 개념과 개념들 간의 관계로 표현한다.
   => 구조를 표현하는 기법을 '도메인 모델링' 이라고 한다.
2. 기능은 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현한다.
   => 기능을 표현하기 위한 기법을 유스케이스 모델링이라고 한다.

소프트웨어의 도메인이 무엇이건 상관없이, 도메인과 관련된 사람들이 도메인을 바라보는 모델이 존재한다.
도메인 모델은 이해관계자들이 바라보는 멘탈 모델이다.
> 멘탈 모델의 구성요소:  사용자 모델, 디자인 모델, 시스템 이미지
1. 사용자 모델은 사용자가 생각하는 그림이고
2. 디자인 모델은 설계자가 생각하는 그림이다.

즉, 사용자 모델과 디자인 모델이 일치한다는 것은 아주 이상적인 상황이다.
하지만 그러기는 쉽지 않다. 따라서, 실제로 만들어지는 최종 제품인 시스템 이미지를 통해서만 의사소통해야 한다.

따라서, 설계자는 디자인 모델을 기반으로 만든 시스템 이미지가 사용자 모델을 정확하게 반영하도록 **노력** 해야 한다.
##### 도메인 모델은 사용자 모델, 디자인 모델, 시스템 이미지를 포괄하도록 추상화한 소프트웨어 모델이다. 즉, 도메인 모델은 소프트웨어에 대한 멘탈 모델이다.
> 따라서, 도메인 모델이라는 것은 사실상 사용자들이 도메인을 바라보는 관점이며, 설계자가 시스템의 구조를 바라보는 관점인 동시에 소프트웨어 안에 구현된 코드의 모습 그 자체이다.


### 표현적 차이
소프트웨어 객체는 현실 객체를 은유하는 것이다. 추상화가 아니다. 

그렇다면 우리는 무엇을 은유해야 하는가? 바로 현실 세계에서 사용자가 생각할 수 있는 도메인에 대한 개념들이다.
> 사용자들이 도메인의 본질적인 측면을 가장 잘 이해하고 있다. 때문에 사용자 모델을 기반으로 코드를 작성한다면, 구조가 안정적으로 만들어지게 된다.

객체지향에서는 소프트웨어의 기능을 기술하기 위해 유스케이스라는 유용한 기법을 사용해왔다.


## 유스케이스
사용자의 목표를 달성하기 위해 사용자와 시스템 간에 이뤄지는 상호작용의 흐름을 텍스트로 정리한 것이 유스케이스다.

유스케이스는 공통의 사용자 목표를 위해 강하게 연관된 시나리오의 집합이다.

유스케이스의 구성은 다음과 같다) 유스케이스명, 일차 액터, 주요 성공 시나리오, 확장
> 유스케이스에는 내부 설계와 관련된 정보는 포함되어있지 않다. 유스케이스는 사용자가 시스템을 통해 무엇을 얻을 수 있는지, 어떻게 상호작용 가능한지에 대한 정보만 기술된다.


## 도메인 모델이 안정적인 이유
도메인 모델을 구성하는 개념들 간의 관계는 비즈니스 규칙을 기반으로 한다. 비즈니스 정책이 변경되지 않는다면 안정적으로 유지되는 개념이다.

도메인을 모델링하기 위한 기법과 도메인을 프로그래밍하기 위해 사용하는 기법이 동일하다는 점이 객체지향의 큰 장점이다. 이런 특징을 연결완전성 이라고 한다.

이 연결완전성은 역방향도 성립한다. 코드의 변경 내용을 보면, 도메인 모델의 변경 사항을 유추 가능하다.
이런 반대로도 부드럽게 흐름이 읽어지는 것을 가역성 이라고 한다.










