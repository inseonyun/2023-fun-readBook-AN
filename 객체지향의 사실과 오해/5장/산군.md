## 책임과 메시지

### 자율적인 책임

- 요청과 응답으로 구성된 연쇄적 흐름이다.
- 이를 통해, 모든 객체들은 동일한 목적을 달성하기 위해 작동한다.
- 협력을 우선한 설계에 집중하라. 역할과 책임, 상태는 알아서 따라온다.

### from my POV

내 생각에 '협력'이란?

- 애플리케이션의 기능 혹은 수행하는 일
- 그럼 '협력'은 최상위개념이며, 이는 인터페이스인가? 아니. 더 위다.

### 책임

- How가 아닌, What에 집중하라

### 메시지와 메서드

#### 메시지(무엇을)

````kotlin
fun `메시지 이름_증언하라`(인자_장소, 시간 등)

MadHatter().testify(time, location)
````

- 메시지를 수신한 객체는, 이를 수행해야할 '책임'이 있다.
- 어떻게는 중요하지 않다.
- 메시지의 모양이 곧, 객체가 수행해야할 책임의 모양이다.
- 객체의 메시지 수신 책임은 외부로 공개되어야만 한다.

#### 메서드(어떻게)

- 외부로 공개된, 수신할 책임은 '메시지'이다.
- 해당 책임을 '어떻게' 수행할지는 수신자만 알고 있으며, 이를 곧 '메서드'라 부른다.

#### 다형성

- 하나의 메시지에 하나 이상의 독립적인 메서드들이 존재하며, 이를 다형성이라 부른다.
- 송신자의 요청에 하나 이상의 수신자들이 각자 다른 메서드를 통해 회신한다.
    - 송신자의 요청에 대한 각기 다른 회신내용은 동일하다.
- 다형성을 만족한다는 것은 객체들이 동일한 책임을 공유한다는 것
    - 대체 가능성을 의미한다.
- 다형성은 수신자의 종류를 캡슐화한다.

#### 다형성을 통한 협력

- 수신자가 수신만 할 수 있다면?(메시지만을 통한 느슨한 결합)
    - 협력이 유연해진다.
    - 협력의 수행방식을 확장할 수 있다.
    - 협력의 수행방식을 재사용할 수 있다.

### 메시지를 따라라

#### 책임-주도 설계(RDD)

- 애플리케이션이 수행하는 기능을 시스템의 책임으로 본다.
- 이 시스템의 책임을 객체의 책임으로 할당한다.
- 객체가 책임을 수행하기 위해 필요한 메시지를 결정한다(What).
- 메시지를 수신할 수 있는 객체를 선택한다(Who).
- 이를 'What/Who 사이클'이라고 한다.

#### Tell, Don't Ask

- 객체는 다른 객체의 결정에 간섭하지 않는다.
- 모든 객체는 스스로 결정한다.
- 이는 객체의 자율성을 보장한다.
- 다른 객체의 상태를 묻지 않는다.
    - ex) 음료를 마셨다면, 콜라에게 마셨다는 메시지만 보내라.
- 메시지에 초점을 두면, 자연스레 캡슐화가 보장되고, 결합도를 낮게만들어 설계를 유연하게 만든다.

### 객체 인터페이스

#### 인터페이스

- 내부 구조나 동작 방식을 몰라도, 쉽게 의사를 전달할 수 있다.
    - ex) 자동차가 어떻게 움직이는 지 모른다. 운전만하면 된다.
- 내부 구조나 동작 방식이 변경되더라도, 인터페이스 사용자에게 어떠한 영향도 미치지 않는다.
    - ex) 자동차 엔진이 변경되더라도, 그대로 운전 할 수 있다.
- 대상이 변경되어도, 동일한 인터페이스를 제공한다면 아무런 문제없이 상호작용 할 수 있다.
    - ex) 기어만 같다면 차종을 바꿔도, 그대로 운전 할 수 있다.

#### 메시지가 인터페이스를 결정한다.

- 객체의 인터페이스는 객체가 수신할 수 있는 메시지의 목록이다.

#### 공용 인터페이스

- 인터페이스는 내부에서 접근가능한/ 외부에서 접근가능한 2가지로 구분된다.
- 외부에 공개된 인터페이스를 공용 인터페이스라고 지칭한다.
    - ex) 증언하라, 입장하라라는 메시지는 하나의 공용 인터페이스에 명시된다.
- 책임-주도 설계에서, 메시지를 먼저 결정하고 이를 수행할 객체를 나중에 찾기에 먼저 인터페이스를 결정할 수 밖에 없다.
- 인터페이스를 우리는 '직업' 혹은 '역할'이라고 부르는 것 같다.
    - 송신자와 수신자가 수행하기로 한 책임의 목록

#### 객체 인터페이스

- 객체가 수신할 수 있는 메시지의 목록이다.

### 인터페이스와 구현의 분리

- 좀 더 추상적인 인터페이스
    - 상세적인 메시지는 객체의 자율성을 저해한다.
- 최소 인터페이스
    - 공용 인터페이스를 제외하고, 가능한 숨겨라.
- 인터페이스와 구현 간에 차이가 있다는 점을 인식
    - 캡슐화를 신경써라.
