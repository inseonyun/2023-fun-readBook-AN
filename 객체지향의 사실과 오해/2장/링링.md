# 행동이 상태를 결정한다.

## 상태와 행동

객체의 상태 = 객체 + 단순한 값(숫자, 문자열, 양, 속도 등의 단순한 값들은 객체가 아니다)
이때 객체의 상태를 구성하는 모든 특징을 통틀어 `property`라고 한다.
객체의 프로퍼티 = 단순한 값인 속성 + 다른 객체를 가리키는 링크

자율적인 객체는 스스로 자신의 상태를 책임져야 한다.
외부의 객체가 직접적으로 객체의 상태를 변경할 수 없다면 간접적으로 객체의 상태를 변경하거나 조회할 수 있는 방법이 필요하다. -> **행동**

👻 나는 단순한 값도 객체로 만들어 버리지 않았는지 고민해보자.
레벨1 자동차 경주 미션에서 자동차 객체는 Name과 Position이라는 객체를 프로퍼티로 갖는다.
원시값 포장은 어디까지 이루어져야 하는 것일까?

</br>

## 상태 캡슐화

`drinkBeverate()` → 앨리스 - `drunken(quantity)` → 음료

두 메시지를 보고 앨리스의 키가 줄어든다/음료의 양이 줄어든다 같은 상태 변경을 예상할수 있는가?
❌, 메시지를 던질 때 메시지 송신자는 메시지 수신자의 상태 변경에 대해서는 전혀 알지 못한다.

이것이 바로 **캡슐화**이다. 이 모든 것이 **객체의 자율화**를 위해서이다.

👻 나의 메시지는 수신자의 상태 변경에 대해 너무 잘 알고 있지는 않은지 고민해보자.

</br>

## 식별자

모든 객체는 식별자를 가지며, 이를 이용해 객체를 구별할 수 있다.  반대로 객체가 아닌 단순한 값은 식별자를 가지지 않는다는 뜻이다.

- 값: 값의 상태는 변하지 않기 때문에 불변 상태를 갖는다.
- 객체: 시간에 따라 변경되는 상태를 포함, 행동을 통해 상태를 변경한다. 객체는 가변 상태를 가진다.

👻 잠깐.. 값 객체가 뭐야 그럼?
객체 지향 프로그래밍에서는 값과 객체 모두 클래스를 이용해 구현된다. (헷갈릴만해 암..!)
예: 숫자 -> Integer 클래스, 사람 -> Person 클래스

- 값 객체(value object): 식별자를 가지지 않는 값을 가리키는 용어
- 참조 객체(reference object), 엔티티(entity): 식별자를 지닌 전통적인 의미의 객체를 가리키는 용어

</br>

## 올바른 객체 지향 설계

초보자들이 하는 실수가 바로 상태를 중심으로 객체를 바라보는 것이다.
예를 들어 앨리스한테는 키와 위치가 필요하겠지? 추가해야징~
상태를 먼저, 행동을 나중에 결정하는 것은 설계에 나쁜 영향을 미친다.
캡슐화가 저해되어 공용 인터페이스에 그대로 노출되거나, 객체를 협력자가 아닌 고립된 섬으로 만들고 객체의 재사용성이 저하된다.

=> **상태가 아닌 행동에 초점을 맞추자 !**
객체가 적합한지를 결정하는 것은 그 객체의 상태가 아니라 행동이다.

올바른 객체지향 설계는 다음과 같은 과정을 가진다.
애플리케이션에 필요한 협력 -> 협력에 참여하는데 필요한 행동 -> 행동을 수행 할 객체 선택 -> 행동에 필요한 정보가 무엇인지 고려하여 필요한 상태 결정

👻 나는 지금까지 객체의 상태에 집중해서 코드를 작성했던 것 같다.
레벨1 블랙잭 미션에서 플레이어가 어떤 행동을 할까에 대해 집중하기보나는 플레이어는 이름과, 카드 패를 갖고 있겠지? 라는 생각이 더 강했던 것 같다. 앞으로는 행동에 대해서 더 고민하도록 해야겠다.