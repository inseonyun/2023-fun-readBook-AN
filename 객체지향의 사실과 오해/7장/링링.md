# 함께 모으기

## 객체지향 설계의 세 가지 관점

1. 개념 관점 (Conceptual Perspective)

개념 관점에서 설계는 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현한다. 
사용자가 **도메인**을 바라보는 관점을 반영한다.
핵심은 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이다.

2. 명세 관점 (Specification Perspective)

사용자의 영역인 도메인을 벗어나 개발자의 영역인 **소프트웨어**로 초점이 옮겨진다. 
도메인의 개념이 아니라 실제로 소프트웨어 안에서 살아 숨쉬는 객체들의 책임에 초점을 맞추게 된다. 
즉, **객체의 인터페이스**를 바라보게 된다. 

3. 구현 관점 (Implementation Perspective)

구현 관점의 초점은 객체들이 책임을 수행하는 데 필요한 **동작코드**를 작성하는 것이다. 

</br>

클래스는 위의 세 가지 관점이라는 안경을 통해 설계와 관련된 다양한 측면을 드러낼 수 있다. 
클래스가 **은유**하는 개념은 도메인 관점을 반영한다. 
클래스의 **공용 인터페이스**는 명세 관점을 반영한다. 
클래스의 **속성과 메서드**는 구현 관점을 반영한다. 
클래스는 세 가지 관점을 모두 수용할 수 있도록 하고, 세 관점을 쉽게 식별 가능하도록 깔끔하게 분리해야한다.

</br>

## 커피 전문점 도메인

### 커피 전문점이라는 세상

동적인 객체를 **정적**인 타입으로 추상화해서 복잡성을 낮출 수 있다. 
타입은 분류를 위해 사용된다는 것을 기억하라. 
상태와 무관하게 동일하게 행동할 수 있는 객체들은 동일한 타입의 인스턴스로 분류할 수 있다. 

</br>

### 예시

메뉴판 타입에서 메뉴 항목 타입 쪽으로 향하는 선에 그려진 속이 찬 마름모는 **포함**(containment) 관계 또는 **합성**(composition) 관계를 나타내는 것으로, 메뉴 항목이 메뉴판에 포함된다는 사실을 표현한다.
4는 메뉴 항목이 4개임을 의미한다.

손님 타입은 메뉴판 타입을 알고 있어야 원하는 커피를 선택할 수 있다. 메뉴판 타입은 손님의 일부가 아니므로 이 관계는 합성 관계가 아니다. 
이 처럼 한 타입의 인스턴스가 다른 타입의 인스턴스를 포함하지는 않지만 서로 알고 있어야 할 경우 **연관** (association) 관계라고 한다.

</br>

## 설계 요청하기

### 메시지가 객체를 선택해야 한다.

메시지를 처리할 객체를 찾고 있다면 먼저 도메인 모델 안에 책임을 수행하기에 적절한 타입이 존재하는지 살펴보라. 
적절한 타입을 발견했다면 책임을 수행할 객체를 그 타입의 인스턴스로 만들어라.

</br>

### 예시

협력에 필요한 객체의 종류와 책임, 주고받아야 하는 메시지에 대한 대략적인 윤곽이 잡혔다.
남은 일은 메시지를 정제함으로써 각 객체의 인터페이스를 구현 가능할 정도로 상세하게 정제하는 것이다.

</br>

### 인터페이스 정리하기

객체가 수신한 메시지가 객체의 인터페이스를 결정한다. 

</br>

### 구현하기

| 협력을 구상하는 단계에 너무 오랜 시간을 쏟지 말고 최대한 빨리 코드를 구현해서 설계에 이상이 없는지, 설계가 가능한 구현 가능한지를 판단해야 한다. 
코드를 통한 피드백 없이는 깔끔한 설계를 얻을 수 없다 .

인터페이스를 정하는 단계에서는 객체가 어떤 속성을 가지는지, 또 그 속성이 어떤 자료 구조로 구현됐는지를 고려하지 않아야 한다. 
객체에게 책임을 할당하고 인터페이스를 경정할 때는 가급적 객체 내부의 구현에 대한 어떤 가정도 하지 말아야 한다. 
객체가 어떤 책임을 수행해야 하는지를 결정한 후에야 책임을 수행하는 데 필요한 객체의 속성을 결정하라. 
이것이 객체의 구현 세부 사항을 객체의 공용 인터페이스에 노출시키지 않고 인터페이스와 구현을 깔끔하게 분리할 수 있는 기본적인 방법이다. 

</br>

## 코드와 세 가지 관점

### 코드는 세 가지 관점을 모두 제공해야 한다

- 개념 관점 : Customer, Menu, MenuItem, Barista, Coffee
- 명세 관점 : 클래스의 **인터페이스**. 공용 인터페이스는 외부의 객체가 해당 객체에 접근할 수 있는 유일한 부분.
- 구현 관점 : 클래스의 내부 구현. 클래스의 **메서드와 속성**은 구현에 속하며 공용 인터페이스의 일부가 아니다.

</br>

### 인터페이스와 구현을 분리하라.

- 명세 관점 : 클래스의 안정적인 측면
- 구현 관점 : 클래스의 불안정한 측면

**명세와 구현 관점을 분리하는 것이 매우 중요하다.**
