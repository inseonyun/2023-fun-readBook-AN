# 코드 품질

**고품질 코드**
신뢰할 수 있고, 유지보수가 쉬우며, 버그가 거의 없는 소프트웨어

**저품질 코드**
신뢰할 수 없고, 유지보수가 어려우며, 버그가 너무 많은 소프트웨어

**소프트웨어 개발 및 배포 프로세스**
코드가 의도한 대로 작동하고 기존으 기능이 여전히 잘 작동한다고 확신하기 위한 다양한 과정과 점검이 이뤄지는 과정

**코드베이스**
+ 소프트웨어를 빌드할 수 있는 코드가 저장된 저장소다.
    > Git, Subversion, Perforce 등과 같은 형상 관리 시스템에 의해 관리된다.

**코드 제출**
+ 가끔 코드 커밋 혹은 풀 요청 병합이라고도 불린다. 개발자는 일반적으로 코드베이스를 자신의 로컬 컴퓨터에 복사하고 여기서 코드를 변경한다. 코드 변경이 끝나면 변경 사항을 메인 코드베이스에 제출한다.

**코드 검토**
+ 많은 회사나 조직에서 코드를 코드베이스에 제출하기 전에 다른 엔지니어가 변경된 내용을 검토하도록 하고 있다. 이것은 원고 교정과 비슷한데 코드 검토 중에 종종 코드 작성자가 놓친 문제를 발견한다.

**제출 전 검사**
때로는 병합 전 훅, 병합 전 점검, 커밋 전 점검이라고도 하며, 테스트가 실패하거나 코드가 컴파일되지 않을 경우 변경 사항이 코드베이스에 병합되지 않도록 차단한다.

**배포**
소프트웨어는 코드베이스의 스냅숏을 기반으로 빌드된다. 다양한 품질 보증 검사 후에 실제 실행 환경에 배포된다. 코드베이스의 특정 버전을 가져와서 배포하는 프로세스를 일컬어 배포 브랜치 만들기라는 문구를 자주 사용한다.

**프로덕션**
소프트웨어가 서버나 시스템에 배포될 때, 테스트 환경과 같이 내부적으로 사용하는 것이 아닌 실제 서비스 되는 환경을 가리킨다.

## 코드 품질의 목표
+ 안전하고
+ 실제로 작동하고
+ 고장나지 않고
+ 예측 가능한 행동을 하는 차를 원한다. -> UI/UX 친화적인

자동차의 품질을 높이는 방법은? 
-> 얼마나 잘 조립되었는지(잘 설계되고, 안전성, 신뢰성 시험했고, 정확하게 조립되었는지)
> 이는 소프트웨어를 만드는 것과 같다.

필자가 목표로 두는 상위 수준 목표 4가지
1. 작동해야 한다.
2. 작동이 멈춰서는 안 된다.
    > 코드는 다른 코드에 의존할 수 있는데 그 코드가 수정되고 변경될 수 있다.
    > 새로운 기능이 필요할 때 코드를 수정해야 할 수도 있다.
    > 우리가 해결하려고 하는 문제는 시간이 지남에 따라 변경된다. 소비자 선호, 비즈니스 요구, 고려해야할 기술 등이 바뀔 수 있다.
3. 변화하는 요구 사항에 적응해야 한다.
    > 비즈니스 환경이 변한다.
    > 사용자 선호가 변한다.
    > 가정이 더 이상 유효하지 않다.
    > 새로운 기능이 계속 추가된다.
4. 이미 존재하는 기능을 또다시 구현해서는 안 된다.

> 필자는 이미 구현한 코드를 재사용함으로써 시간과 노력을 절약하고, 버그 가능성을 줄이며, 기존 전문지식을 활용하고, 코드가 이해하기 쉽다고 설명한다. 이는 맞는 말이지만 존재하는 기능을 또다시 구현하지 않는 고품질 코드를 만들기란 쉽지 않다.
> 난 또다시 구현하도록 만들고, 중복된 코드를 제거하는 방식의 리펙터링을 하는 것을 좋아한다. (실력이 안 돼서)

## 코드 품질의 핵심 요소
1. 코드는 읽기 쉬워야 한다.
    > 코드가 하는 일
    > 어떻게 그 일을 수행하는지
    > (입력이나 상태 등) 어떤 것을 필요로 하는지
    > 코드 실행 결과물
    > 코드의 가독성이 떨어지면 다른 개발자가 그 코드를 이해하는 데 많은 시간을 들여야 한다.
2. 코드는 예측 가능해야 한다.
    > 도움이 되거나 똑똑한 일을 수행하는 코드를 작성할 때, 아무리 좋은 의도를 가지고 있더라도 예상을 벗어난 동작을 수행하는 위험이 있을 수 있다.
3. 코드를 오용하기 어렵게 만들어라.
4. 코드를 모듈화하라.
    > 모듈화된 시스템의 주요 특징 중 하나는 인터페이스가 잘 정의되어 서로 다른 구성요소 간 상호작용하는 지점이 최소화된다. 
5. 재사용 가능하고 일반화 할 수 있게 작성하라.
    > 재사용성: 어떤 문제를 해결하기 위한 무언가가 여러 가지 다른 상황에서도 사용될 수 있음
    > 일반화성: 서로 미묘하게 다른 문제들을 해결할 수 있음
    > ?_? 둘 이해가 잘 안 된다.
6. 테스트가 용이한 코드를 작성하고, 제대로 테스트하라.
    > 테스트는 버그나 제대로 동작하지 않는 기능을 갖는 코드가 코드베이스에 병합되지 않도록 방지한다. / 이러한 코드가 배포되지 않도록 막고 서비스 환경에서 실행되지 않도록 보장한다.
    > 테스트: 코드 혹은 소프트웨어 전체를 테스트하는 것과 관련이 있다.
    > 단위 테스트(unit test): 일반적으로 개별 함수나 클래스와 같은 작은 단위의 코드를 테스트한다.
    > 통합 테스트(integration test): 시스템은 일반적으로 구성 요소, 모듈, 하위 시스템으로 구성된다. 이러한 구성 요소와 하위 시스템을 함께 연결하는 과정을 통합이라고 한다. 통합 테스트를 통해 이러한 여러 구성 요소들이 제대로 작동하고 멈추지 않고 계속 실행하는지 확인 할 수 있다.
    > 종단간 테스트(end-to-end, E2E test): 처음부터 끝까지 전체 소프트웨어 시스템에서 작동의 흐름(워크플로우)을 테스트한다.
    > ex) 테스트 대상이 온라인 쇼핑몰이라면, 웹브라우저를 자동으로 구동하고 사용자가 구매를 완료하는 데까지 진행할 수 있는지 테스트하는 것이 E2E 테스트이다.
    > 테스트 용이성: 테스트 대상이 되는 '실제'코드를 가리키며 해당 코드가 얼마나 테스트하기 적합한지를 나타낸다. 테스트 용이성은 서브시스템이나 시스템 수준에도 적용될 수 있다. 테스트 용이성은 모듈화와 깊은 관련이 있으며, 모듈화된 코드는 테스트 용이성이 더 좋다.

> 주구장창 다 맞는 얘기다. 다 중요하고 지켜야할 요소들이다.

## 고품질 코드 작성은 일정을 지연시키는가?
단기적으로는 고품질 코드를 작성하는 데 시간이 더 걸릴 수 있다. 높은 품질의 코드 작성은 바로 코딩하는 것보다 조금 더 많은 시간과 노력이 필요하다.

## 요약
+ 좋은 소프트웨어를 만들려면 고품질 코드를 작성해야 한다.
+ 실제 서비스 환경에서 실행되는 소프트웨어가 되기 전 코드는 일반적으로 여러 단계의 검사와 테스트를 통과해야 한다.
+ 버그나 제대로 동작하지 않는 기능이 사용자에게 제공되거나 비즈니스에 중요한 시스템에서 실행되는 것을 이러한 검사를 통해 막을 수 있다.
+ 테스트는 코드를 작성하는 모든 단께에서 고려하는 것이 좋다. 코드를 다 작성하고 난 후에 고려하는 것이 아니다. --> TDD
+ 고품질 코드를 작성하면 처음에는 시간이 오래 걸리지만, 중장기적으로는 개발 시간이 단축되는 경우가 많다.

