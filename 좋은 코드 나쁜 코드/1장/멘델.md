# 1장) 코드 품질

고품질 코드란? 더 신뢰 가능하고, 유지보수가 쉽고, 버그가 적은 소프트웨어

그렇다고  좋은 코드가 더 좋은 소프트웨어를 만드는 필수 조건은 아니라는 것도 기억하자.

### 소프트웨어 개발 및 배포 프로세스에 사용되는 용어들

- 코드 베이스: 빌드 가능한 코드가 저장된 저장소. 깃과 같은 형상 관리 시스템에 의해 관리 된다.
- 코드 제출: 코드 커밋, 풀 요청 병합(pr) 등 로컬 코드베이스에서 작업하고 메인 코드베이스에 제출하는 행위를 말한다.
- 코드 검토: 코드를 코드베이스에 제출하기 전에 다른 엔지니어가 검토해주는 것. 코드리뷰와 유사
- 제출 전 검사: ‘병합 전 훅’, ‘병합 전 점검’, ‘커밋 전 점검’이라고도 부름. 테스트가 실패하거나 컴파일 되지 않으면, 코드베이스에 병합되지 않도록 원천적으로 차단하는 것임.
- 배포: 코드베이스의 특정 버전을 가져와서 배포하는 프로세스를 ‘배포 브랜치 만들기’ 라는 문구를 사용하기도 한다.
- 프로덕션 환경: 실제 서비스되는 환경을 말함.

### 저자가 코드를 작성할 때 달성하려는 네 가지 상위 수준의 목표

- 작동해야 한다
    - 버그가 없어야 한다는 것을 포함
    - 보안적이어야 한다는 것도 포함
    - 성능이 중요한 문제라면, 성능을 만족시키며 동작해야 하는 것도 ‘작동해야 한다’라는 말에 포함된 것임
- 작동이 멈춰서는 안 된다
    - 변화하는 환경과 요구 사항에도 불구하고 계속 작동하는 코드를 만들라는 내용임.
- 변화하는 요구 사항에 적응해야 한다
    - 위의 내용과 유사하다.
    - 적응 가능한 코드를 만들기 위해 균형잡힌 결정을 해야 하는 것은 어렵지만, 무시할 수 없다는 내용
- 이미 존재하는 기능을 또 다시 구현해서는 안 된다(언어 차원이나 프레임워크나 라이브러리 수준에서 지원해주는 것을 말하는 듯하다)
    - 기존꺼 쓰면 좋은 장점들
        - 시간과 노력 절약 가능
        - 버그 가능성을 줄여준다
        - 기존 전문지식을 활용가능
            - 레트로핏 사용하면, 네트워크 처리를 전문가들이 잘했을 것임. 글라이드도 이미지 처리 잘했을 것임.
        - 코드 이해가 쉽다
            - 표준화된 방법 사용할 것이므로 서로 바로 알 수 있다.

# 코드 품질 핵심 요소 여섯가지

위에서 설명한 네가지 목표를 이루기 위한 실제 업무에 적용 가능한 조언 6가지임.

- 코드는 읽기 쉬워야 한다
    - 코드가 하는 일, 어떻게 그 일을 하는지, 이 일을 하기 위해 무엇을 필요로 하는지, 코드 실행 결과물은 무엇인지 등을 이해하려고 사람들은 애쓴다.
    - 위의 것들이 잘 파악되지 않는다면, 유지보수도 디버깅도 모두 어렵다.
- 코드는 예측 가능해야 한다
    - 아무리 좋은 의도를 갖고 있더라도, 예상을 벗어난 동작을 수행하는 코드는 작성하지 말아라. 나중에 거기서 문제 생기면 찾기 어렵다.
- 코드 오용을 어렵게 해라
    - 내가 작성한 코드는 다른 곳에서 사용되기를 기대한다. 이때, 이 코드가 실행되어야 하는 상황이 아니면 실행 안되도록 막아야 한다.
- 코드를 모듈화해라
    - 모듈화는 구성요소가 독립적으로 교환되거나 교체될 수 있음을 의미한다.
    - 모듈화가 잘 됐다는 것은 인터페이스화가 잘 되었다는 것이며, 구성요소 간에 상호작용하는 지점이 최소화 된다는 것을 말한다.
- 코드를 재사용 가능하고 일반화할 수 있게 작성해라
    - 재사용성: 특정 문제를 해결하기 위한 무언가가 여러 다른 상황에서 재사용 될 수 있도록 하는 것
        - 벽을 뚫기 위해 드릴을 만들었더니, 벽, 천장, 바닥 뚫는데 사용될 수 있더라.
    - 일반화성: 개념적으로는 유사하지만 서로 미묘하게 다른 문제들을 해결할 수 있음을 의미
        - 드릴은 구멍 뚫는 것 뿐 아니라 나사 박을 때도 사용 가능하다.
- 테스트가 용이한 코드를 작성하고, 제대로 테스트해라
    - 테스트는 잘못된 코드가 코드베이스에 병합되는 것을 방지하고, 배포되지 않도록 보장한다.
    - 테스트: 단위 테스트, 통합 테스트, 종단간 테스트 등이 포함된다.
        - 종단간 테스트?: 처음부터 끝까지 전체 소프트웨어의 흐름을 테스트하는 것. E2E 테스트라고도 불린다.
    - 테스트 용이성: 테스트 대상이 되는 실제 코드가 얼마나 테스트하기 적합한가?를 나타낸다. 일반적으로 모듈화가 잘된 코드가 테스트하기 쉽다. 모듈별로 주어진 인풋에 대해 정해진 아웃풋을 잘 뱉어내는지 검사하면 끝나기 때문이다. 모듈별로 테스트하면 테스트 비용도 낮다.
        - 이런 테스트 용이성을 좋게 하기 위해서는, 코드를 작성하면서 계속 ‘어떻게 테스트할 것인가?’를 자문하는 것이 좋다. ⇒ 코드 다 짜고 테스트를 어떻게 할지 생각하지 말라는 것임.


# 고품질 코드 작성이 일정을 지연시키는가?

당장은 느려보일 수 있지만, 우리가 작성하는 코드가 장기 프로젝트라면, 고품질 코드를 작성하는 것이 장기적으로는 개발 시간을 단축해준다.

‘서두르지 않으면 더 빠르다’ 라는 말을 짚어줬다.
